This package will contain the simulation environment for the 3 challenges

NOTES:

-----------
## **CHALLENGE 1**

The world represents the arena for the challenge 1, including:
- Realistic size, landing/takeoff area and deploy area
- Balloons with configurable position, height and color
- Drone carrying a ball following a 3D '8' path

### **Dependencies**
* xacro:

        sudo apt-get install ros-kinetic-xacro

* mavros:

        sudo apt-get install ros-kinetic-mavros ros-kinetic-mavros-extras

* ROS launch script to run SITL and MAVROS (view [Setup](#Setup)): 

        git clone https://github.com/PX4/Firmware

* Gazebo 9

### **Setup**

* Compile
* Update ROS environment to run SITL wrapped in ROS (view [Dependencies](#Dependencies))

> Environment variables need to be updated every new terminal

        cd <Firmware_clone>

        make px4_sitl_default gazebo 

        source {path_to_your_workspace}/devel/setup.bash

        source Tools/setup_gazebo.bash $(pwd) $(pwd)/build/px4_sitl_default

        export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:$(pwd)

        export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:$(pwd)/Tools/sitl_gazebo

* Launch *challege1.launch* file to see the World of Challenge 1 
    > If the drone gets stuck and needed to restart it, wait before launching again so that the gazebo server sockets are closed 

        roslaunch challenge_worlds challenge1.launch

* When the World is open in Gazebo, launch target drone plugin to see the target drone trajectory
    > The trajectory will be automatically sent to drone model named _iris_. 

        roslaunch mbzirc_gazebo_plugins target_drone.launch

### **Others**

* Folder config inside challenge_worlds contains two .csv files that describe how the static balloons are situated. The text format is "*id, x, y, height, color*"

* Launch files have many arguments available in order to configure the arena.

-----------
## **CHALLENGE 2**


The world is composed of a ground plane and four piles of bricks. The piles are gazebo models and the bricks are links. The xacro macros for the brick piles are contained in the folder urdf and were autogenerated with the python script 'scripts/xacro_brick_pile.py'. The bricks match the specifications given by the MBZIRC organization (with exception of the surface parameters, eg. friction). In case of needing to modify the pile models it's recommended to use the script instead of manually modifying the xacro files. For info on how to use it run in a terminal:

	python xacro_brick_pile.py -h


-----------
## **CHALLENGE 3**	


The world represents the arena for the challenge 3, including:
- Realistic sized area (50x60m).
- Structure simulating the high-rise Building (up to 20m in high).
- Fires to be simulated at various random locations at ground level in the arena (indoor and
outdoor), and at different heights of the building.

In case of needing to modify the building model, the files are contained in the folder urdf.